<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SCAF Dataset Aggregator</title>
  <link rel="stylesheet" href="website_contents/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">

  <!-- Favicon and manifest setup -->
  <link rel="apple-touch-icon" sizes="180x180" href="/browse/assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/browse/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/browse/assets/favicon-16x16.png">
  <link rel="manifest" href="/browse/assets/site.webmanifest">
  <link rel="shortcut icon" href="/browse/assets/favicon.ico" type="image/x-icon">

</head>
<body class="home centered-body">
  <div class="center-box">
    <img src="assets/SCAF_LOGO.svg" alt="SCAF Logo" class="logo">
    <h1>SCAF Dataset Aggregator</h1>

    <div id="search-bar-placeholder"></div>
<script src="website_contents/shared/load_search_bar.js"></script>
<script>
  const websiteContentsPath = "website_contents/";

  async function insertLastUpdatedTimestamp(websiteContentsPath) {
  try {
    const url = `${websiteContentsPath}../website_metadata/website_generation_metadata.json`;
    const response = await fetch(url);

    if (!response.ok) {
      console.error("Could not load metadata JSON.");
      return;
    }

    const data = await response.json();
    const ts = data.last_updated; // "2025-11-17 10:18:43.335521"
    if (!ts) {
      console.error("No last_updated field in JSON.");
      return;
    }

    // Parse the timestamp (first part only)
    const [datePart] = ts.split(" ");
    const [year, month, day] = datePart.split("-");

    const pretty = `Last updated on ${day}/${month}/${year}`;

    // Insert into existing placeholder
    const placeholder = document.getElementById("last_updated_placeholder");
    if (placeholder) {
      placeholder.textContent = pretty;
    } else {
      console.warn("Placeholder element #last_updated_placeholder not found.");
    }

  } catch (err) {
    console.error("Error fetching last_updated timestamp:", err);
  }
}

  // Wait until the bar is loaded before continuing
  loadSearchBar(websiteContentsPath).then(() => {
    // place the footer with the "last updated at ..." text
      insertLastUpdatedTimestamp(websiteContentsPath);

  });


</script>

    <hr>

    <nav>
      <a href="website_contents/about_page/about_page.html">About</a> |
      <a href="website_contents/dataset_listing/dataset_listing.html">Dataset Listing</a> |
      <a href="website_contents/submit_dataset_webpage/submit_dataset.html"> Submit/Amend a dataset </a>
    </nav>

    <footer>
      <p id = "last_updated_placeholder">Last updated: Unknown</p>
    </footer>
  </div>
</body>
</html>
